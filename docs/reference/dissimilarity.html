<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Dissimilarity Computation — dissimilarity • arules</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>

<!-- mathjax -->
<script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">arules</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference Manual</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="https://github.com/mhahsler/arules/">Development Version</a>
</li>
<li>
  <a href="https://github.com/mhahsler/arules">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="http://michael.hahsler.net">Michael Hahsler (Maintainer)</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Dissimilarity Computation</h1>
    </div>

    
    <p>Provides the generic function <code>dissimilarity</code> and the S4 methods to
  compute and returns distances for binary data in a <code>matrix</code>,
  <code><a href='transactions-class.html'>transactions</a></code> or <code><a href='associations-class.html'>associations</a></code> which 
  can be used for grouping and clustering. See Hahsler (2016)
  for an introduction to distance-based
  clustering of association rules.</p>
    

    <pre>dissimilarity(x, y = NULL, method = NULL, args = NULL, &#8230;)

# S4 method for itemMatrix
dissimilarity(x, y = NULL, method = NULL, args = NULL,
	which = "transactions")

# S4 method for associations
dissimilarity(x, y = NULL, method = NULL, args = NULL,
	which = "associations")

# S4 method for matrix
dissimilarity(x, y = NULL, method = NULL, args = NULL)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <dl class="dl-horizontal">
      <dt>x</dt>
      <dd> the set of elements (e.g., <code>matrix, itemMatrix, transactions, 
    itemsets, rules</code>). </dd>
      <dt>y</dt>
      <dd> <code>NULL</code> or a second set to calculate cross dissimilarities. </dd>
      <dt>method</dt>
      <dd> the distance measure to be used. Implemented measures
  are (defaults to <code>&quot;jaccard&quot;</code>):
   <dl class='dl-horizontal'>
       <dt><code>&quot;affinity&quot;</code>:</dt><dd> measure based on 
         the <code><a href='affinity.html'>affinity</a></code>,
         a similarity measure between items. It is defined as the
         average <em>affinity</em> between the items in two transactions 
         (see Aggarwal et al. (2002)). If <code>x</code> is not the
	 full transaction set <code>args</code> needs to contain
	 either precalculated affinities as element <code>&quot;affinities&quot;</code> or
	 the transaction set as <code>&quot;transactions&quot;</code>.</dd>
       <dt><code>&quot;cosine&quot;</code>:</dt><dd> the <em>cosine</em> distance.</dd> 
       <dt><code>&quot;dice&quot;</code>:</dt><dd> the <em>Dice&#39;s coefficient</em> defined
         by Dice (1945). Similar to <em>Jaccard</em> but gives double the
	     weight to agreeing items.</dd>
       <dt><code>&quot;euclidean&quot;</code>:</dt><dd> the <em>euclidean</em> distance.</dd> 
       <dt><code>&quot;jaccard&quot;</code>:</dt><dd> the number of items which occur in both 
         elements divided by the total number of items in the 
         elements (Sneath, 1957). 
         This measure is often 
         also called: <em>binary, asymmetric binary,</em> etc. </dd>
       <dt><code>&quot;matching&quot;</code>:</dt><dd> the <em>Matching coefficient</em> defined
         by Sokal and Michener (1958). This coefficient gives the same
	     weight to presents and absence of items.</dd>
       <dt><code>&quot;pearson&quot;</code>:</dt><dd> \(1 - r\) if \(r&gt;1\) and 
	\(1\) otherwise. \(r\) is <em>Pearson&#39;s correlation 
        coefficient</em>.</dd> 
       <dt><code>&quot;phi&quot;</code>:</dt><dd> same as pearson. Pearson&#39;s correlation
	coefficient reduces to the phi coefficient for the 2x2 contingency 
	tables used here.</dd> 
    </dl>

    For associations the following additional measures are available:
    <dl class='dl-horizontal'>
	<dt><code>&quot;toivonen&quot;</code>:</dt><dd>Method described in Toivonen et al. (1995).
	    For rules this measure is only defined between rules with
	    the same consequent.
	    The distance between two rules is defined as the number of 
	    transactions which is 
	    covered by only one of the two rules.
	    The transactions used to mine the associations has to be passed on
		via <code>args</code> as element <code>&quot;transactions&quot;</code>.</dd>
	<dt><code>&quot;gupta&quot;</code>:</dt><dd>Method described in Gupta et al. (1999).
	    The distance between two rules is defined as 1 minus the
	    proportion of transactions which are covered by both
	    rules in the transactions covered by each rule individually.
	    The transactions used to mine the associations has to be passed on
		via <code>args</code> as element <code>&quot;transactions&quot;</code>.</dd>
    </dl>


 </dd>
      <dt>args</dt>
      <dd> a list of additional arguments for the methods.</dd>
      <dt>which</dt>
      <dd>a character string indicating if the dissimilarity should be 
     calculated between transactions/associations (default) 
     or items (use <code>&quot;items&quot;</code>). </dd>
      <dt>&#8230;</dt>
      <dd>further arguments.</dd>
    </dl>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>returns an object of class <code>dist</code>.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p><code><a href='affinity.html'>affinity</a></code>,
  <code><a href='proximity-classes.html'>dist-class</a></code>,
  <code><a href='itemMatrix-class.html'>itemMatrix-class</a></code>,
  <code><a href='associations-class.html'>associations-class</a></code>.</p>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Aggarwal, C.C., Cecilia Procopiuc, and Philip S. Yu. (2002)
  Finding localized associations in market basket data.
  <em>IEEE Trans. on Knowledge and Data Engineering</em> 14(1):51--62.</p>
    <p>Dice, L. R. (1945) Measures of the amount of ecologic association 
  between species. <em>Ecology</em> 26, pages 297--302.</p>
    <p>Gupta, G., Strehl, A., and Ghosh, J. (1999) Distance based clustering 
  of association rules. <em>In Intelligent Engineering 
  Systems Through Artificial Neural Networks (Proceedings 
  of ANNIE 1999)</em>, pages 759-764. ASME Press.</p>
    <p>Hahsler, M. (2016) Grouping association rules using lift. In C. 
  Iyigun, R. Moghaddess, and A. Oztekin, editors, 11th INFORMS Workshop 
  on Data Mining and Decision Analytics (DM-DA 2016).</p>
    <p>Sneath, P. H. A. (1957) Some thoughts on bacterial classification. 
  <em>Journal of General Microbiology</em> 17, pages 184--200.</p>
    <p>Sokal, R. R. and Michener, C. D. (1958) A statistical method for evaluating 
  systematic relationships. <em>University of Kansas Science Bulletin</em> 38, 
  pages 1409--1438.</p>
    <p>Toivonen, H., Klemettinen, M., Ronkainen, P., 
  Hatonen, K. and Mannila H. (1995) Pruning and grouping discovered
  association rules. <em>In Proceedings of KDD&#39;95</em>.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>## cluster items in Groceries with support &gt; 5%</span>
<span class='fu'>data</span>(<span class='st'>"Groceries"</span>)

<span class='no'>s</span> <span class='kw'>&lt;-</span> <span class='no'>Groceries</span>[,<span class='fu'><a href='itemFrequency.html'>itemFrequency</a></span>(<span class='no'>Groceries</span>)<span class='kw'>&gt;</span><span class='fl'>0.05</span>]
<span class='no'>d_jaccard</span> <span class='kw'>&lt;-</span> <span class='fu'>dissimilarity</span>(<span class='no'>s</span>, <span class='kw'>which</span> <span class='kw'>=</span> <span class='st'>"items"</span>)
<span class='fu'>plot</span>(<span class='fu'>hclust</span>(<span class='no'>d_jaccard</span>, <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"ward.D2"</span>))</div><img src='dissimilarity-2.png' alt='' width='540' height='400' /><div class='input'>
<span class='co'>## cluster transactions for a sample of Adult</span>
<span class='fu'>data</span>(<span class='st'>"Adult"</span>)
<span class='no'>s</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='sample.html'>sample</a></span>(<span class='no'>Adult</span>, <span class='fl'>500</span>)

<span class='co'>##  calculate Jaccard distances and do hclust</span>
<span class='no'>d_jaccard</span> <span class='kw'>&lt;-</span> <span class='fu'>dissimilarity</span>(<span class='no'>s</span>)
<span class='no'>hc</span> <span class='kw'>&lt;-</span> <span class='fu'>hclust</span>(<span class='no'>d_jaccard</span>, <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"ward.D2"</span>)
<span class='fu'>plot</span>(<span class='no'>hc</span>, <span class='kw'>labels</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>main</span> <span class='kw'>=</span> <span class='st'>"Dendrogram for Transactions (Jaccard)"</span>)</div><img src='dissimilarity-4.png' alt='' width='540' height='400' /><div class='input'>
<span class='co'>## get 20 clusters and look at the difference of the item frequencies (bars) </span>
<span class='co'>## for the top 20 items) in cluster 1 compared to the data (line) </span>
<span class='no'>assign</span> <span class='kw'>&lt;-</span> <span class='fu'>cutree</span>(<span class='no'>hc</span>, <span class='fl'>20</span>)
<span class='fu'><a href='itemFrequencyPlot.html'>itemFrequencyPlot</a></span>(<span class='no'>s</span>[<span class='no'>assign</span><span class='kw'>==</span><span class='fl'>1</span>], <span class='kw'>population</span><span class='kw'>=</span><span class='no'>s</span>, <span class='kw'>topN</span><span class='kw'>=</span><span class='fl'>20</span>)</div><img src='dissimilarity-6.png' alt='' width='540' height='400' /><div class='input'>
<span class='co'>## calculate affinity-based distances between transactions and do hclust</span>
<span class='no'>d_affinity</span> <span class='kw'>&lt;-</span> <span class='fu'>dissimilarity</span>(<span class='no'>s</span>, <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"affinity"</span>)
<span class='no'>hc</span> <span class='kw'>&lt;-</span> <span class='fu'>hclust</span>(<span class='no'>d_affinity</span>, <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"ward.D2"</span>)
<span class='fu'>plot</span>(<span class='no'>hc</span>, <span class='kw'>labels</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>main</span> <span class='kw'>=</span> <span class='st'>"Dendrogram for Transactions (Affinity)"</span>)</div><img src='dissimilarity-8.png' alt='' width='540' height='400' /><div class='input'>
<span class='co'>## cluster association rules</span>
<span class='no'>rules</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='apriori.html'>apriori</a></span>(<span class='no'>Adult</span>, <span class='kw'>parameter</span><span class='kw'>=</span><span class='fu'>list</span>(<span class='kw'>support</span><span class='kw'>=</span><span class='fl'>0.3</span>))</div><div class='output co'>#&gt; Apriori
#&gt; 
#&gt; Parameter specification:
#&gt;  confidence minval smax arem  aval originalSupport maxtime support minlen
#&gt;         0.8    0.1    1 none FALSE            TRUE       5     0.3      1
#&gt;  maxlen target   ext
#&gt;      10  rules FALSE
#&gt; 
#&gt; Algorithmic control:
#&gt;  filter tree heap memopt load sort verbose
#&gt;     0.1 TRUE TRUE  FALSE TRUE    2    TRUE
#&gt; 
#&gt; Absolute minimum support count: 14652 
#&gt; 
#&gt; set item appearances ...[0 item(s)] done [0.00s].
#&gt; set transactions ...[115 item(s), 48842 transaction(s)] done [0.03s].
#&gt; sorting and recoding items ... [14 item(s)] done [0.01s].
#&gt; creating transaction tree ... done [0.03s].
#&gt; checking subsets of size 1 2 3 4 5 6 done [0.03s].
#&gt; writing ... [508 rule(s)] done [0.00s].
#&gt; creating S4 object  ... done [0.01s].</div><div class='input'><span class='no'>rules</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='subset.html'>subset</a></span>(<span class='no'>rules</span>, <span class='kw'>subset</span> <span class='kw'>=</span> <span class='no'>lift</span> <span class='kw'>&gt;</span> <span class='fl'>2</span>)

<span class='co'>## use affinity to cluster rules</span>
<span class='co'>## Note: we need to supply the transactions (or affinities) from the </span>
<span class='co'>## dataset (sample).</span>
<span class='no'>d_affinity</span> <span class='kw'>&lt;-</span> <span class='fu'>dissimilarity</span>(<span class='no'>rules</span>, <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"affinity"</span>,
  <span class='kw'>args</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>transactions</span> <span class='kw'>=</span> <span class='no'>s</span>))
<span class='no'>hc</span> <span class='kw'>&lt;-</span> <span class='fu'>hclust</span>(<span class='no'>d_affinity</span>, <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"ward.D2"</span>)
<span class='fu'>plot</span>(<span class='no'>hc</span>, <span class='kw'>main</span> <span class='kw'>=</span> <span class='st'>"Dendrogram for Rules (Affinity)"</span>)</div><img src='dissimilarity-12.png' alt='' width='540' height='400' /></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#see-also">See also</a></li>

      <li><a href="#references">References</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    Michael Hahsler
  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Michael Hahsler, Christian Buchta, Bettina Gruen, Kurt Hornik.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
